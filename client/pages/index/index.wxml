<!--pages/index/index.wxml-->
<!-- <text>pages/index/index.wxml</text> -->
<dropdown-telephone bindtap="dropdownTelephoneMaskTap" bindupdateCartHandle="updateCartHandle" opened="{{dialog.telephone.opened}}" bindsubClickable="subClickableHandle" telephoneObj="{{dialog.telephone.telephoneObj}}" />
<dropdown-auth bindtap="dropdownAuthMaskTap" opened="{{dialog.auth.opened}}" />
<dropdown-diy bindtap="dropdownDiyMaskTap" opened="{{dialog.diy.opened}}" />
<dropdown-share bindtap="dropdownShareMaskTap" opened="{{dialog.share.opened}}" />
<!-- <dialog-forbidden dialogVisible="{{dialog.forbidden.opened}}" bindconfirm="diaConfirmHandle" /> -->
<!-- 无铭牌信息页面 -->
<view wx:if="{{isCardEmpty}}" class="container container-welcome">
  <view wx:if="{{compatibleInfo.systemInfo.safeArea}}" class="compatibleIphoneXEl"></view>
  <view class="section1">
    <image src="/assets/images/home_bk.png" mode="aspectFill"></image>
    <view class="card">
      <view class="l1">
        <view>{{mapBackground[currentSwiperIndex].tit}}</view>
      </view>
      <view class="l2">{{mapBackground[currentSwiperIndex].des}}</view>
      <view class="l3">
        <swiper indicator-dots="{{indicatorDots}}" autoplay="{{autoplay}}" interval="{{interval}}" duration="{{duration}}" indicator-color="{{rgba(255, 255, 255, .6)}}" indicator-active-color="{{indicatorActiveColor}}" circular="true" bindchange="bindchangeHandle">
          <block wx:for="{{background}}" wx:key="*this">
            <swiper-item>
              <!-- <view class="swiper-item {{item.image_url}}"></view> -->
              <image class="swiper-item icon-banner" src="{{item}}" mode="aspectFill"></image>
            </swiper-item>
          </block>
        </swiper>
      </view>
    </view>
  </view>
  <view class="section2">
    <view wx:if="{{userInfo.avatar_url}}" class="btn btn-create" bindtap="createCardHandle">创建我的数字星片</view>
    <block wx:else>
      <button class="btn btn-create" wx:if="{{canIUseGetUserProfile}}" bindtap="getUserProfile">创建我的数字星片</button>
      <button class="btn btn-create" wx:else open-type="getUserInfo" bindgetuserinfo="getUserProfile">创建我的数字星片</button>
    </block>
  </view>
  <view class="section3">
    <view class="radio_box" bindtap="agreementHandle">
      <image wx:if="{{is_select}}" class="radio_img" src="/assets/images/home_n.png" mode="aspectFill"></image>
      <view wx:else class="radio"></view>
    </view>
    <view class="agree">同意
      <text class="agreement">
        <text>《用户协议》</text>和<text>《隐私协议》</text>
      </text>
    </view>
  </view>
</view>

<!-- 我的名片 -->
<view wx:else class="container container-index">
  <view class="fixed">
    <top-navigation navigationBarTitleText="{{navigationBarTitleText}}" navHeight="{{compatibleInfo.navHeight}}" navTop="{{compatibleInfo.menuButtonObject.top}}" menuButtonHeight="{{compatibleInfo.menuButtonObject.height}}" status="{{navStatus}}" location="{{currentAddress}}" color="#333" bgColor="{{(currentId==1||fixed)?'#FFF':'transparent'}}" />
  </view>
  <scroll-view class="content" bindscroll="scrollHandle" scroll-y="true" style="height: {{compatibleInfo.systemInfo.screenHeight-(compatibleInfo.tabbarH)+'px'}};">
    <!-- <view class="content"> -->
    <view class="section1 card">
      <card cid="{{currentId}}" />
    </view>
    <!-- 浏览和赞 -->
    <view class="section2">
      <view class="left">
        <view class="avatar_box">
          <image wx:for="{{cardData.avatars}}" class="avatar" src="{{item}}"></image>
        </view>
        <view class="text">524人浏览</view>
      </view>
      <view class="right">
        <image class="icon_liked" src="/assets/images/card_like.png" mode="aspectFill"></image>
        <view class="text">8人赞</view>
      </view>
    </view>
    <!-- 推荐和联系等按钮 -->
    <view class="section3">
      <button class="btn btn-share">
        <image src="/assets/images/card_recommend.png" mode="aspectFill"></image>
        <text>推荐给好友</text>
      </button>
      <button class="btn btn-reply">
        <image src="/assets/images/card_back.png" mode="aspectFill"></image>
        <text>回递名片</text>
      </button>
    </view>
    <!-- 电话 邮箱 地址... -->
    <view class="section4">
      <view class="item-box hide-scrollbar">
        <view wx:for="{{section4}}" wx:key="unique" class="item" data-item="{{item}}" bindtap="itemHandle">
          <view class="row1">
            <image src="{{item.img}}" mode="aspectFill"></image>
            <view>{{item.title}}</view>
          </view>
          <view class="row2">{{item.content}}</view>
        </view>
      </view>
    </view>
    <!-- ta的简介，ta的产品... -->
    <view class="section5 {{fixed?'fixed':''}}" style="{{fixed?'top:'+(compatibleInfo.tabbarH+compatibleInfo.navHeight)+'px':''}}">
      <view class="tabs-nav" bindtap='changeTab'>
        <view wx:for="{{tabbar}}" wx:key="unique" data-index="{{index}}" class="tab {{tabIndex==index?'active':''}}">
          <view calss="text" data-index="{{index}}">{{item}}</view>
        </view>
        <view class="tabs-line" style="transform:translateX({{tabWidth*tabIndex+tabWidth/2+'px'}})translateX(-50%)">
        </view>
      </view>
      <view class="cont hide-scrollbar" style="height:{{compatibleInfo.systemInfo.screenHeight-(compatibleInfo.tabbarH+compatibleInfo.navHeight+tabHeight)+'px'}}">
        <view class="no-data" wx:if="{{tadeOptions[tabIndex].cache.length==0}}">
          <image mode="aspectFill" src="/assets/images/img_empty.png"></image>
          <view class="text">这里是空的</view>
        </view>
        <view class='ta' wx:elif="{{tadeOptions[tabIndex].cache.length}}">
          <view class="card" wx:for="{{tadeOptions[tabIndex].cache}}" wx:key="unique" data-id="{{item.id}}" bindtap="toOrderHandle">
          </view>
        </view>
      </view>
    </view>
    <view class="section6"></view>
    <view class="section7"></view>
    <view class="section8"></view>
    <!-- </view> -->
  </scroll-view>
</view>

<json-add dialogVisible="{{jsonAddDialogVisibile}}" navHeight="{{compatibleInfo.navHeight}}" />